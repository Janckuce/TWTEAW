on_actions = {
    on_state_control_changed = {
        effect = {
            if = {
                limit = {
                    Not = {
                        has_war_with = FRA
                        has_war_with = RUS
                        has_war_with = ENG
                        }
                        OR = {
                        tag = SER
                        tag = GRE
                        tag = MNT
                        tag = ROM
                        tag = TUR
                    }
                    from.from = {
                        state = 48
                    }
                }
                BUL = {
                    country_event = {
                        id = ww1_serbia.18
                        days = 7
                    }
                }
            }
        }
    }
    on_before_peace_conference_start = {
        effect = {
            if = {
                limit = {
                    tag = SER
                    from = { tag = BUL }
                    BUL = {
                        has_war_with = SER
                        has_war_with = GRE
                        has_war_with = MNT
                        has_war_with = ROM
                    or = {
                    has_war_with = TUR
                        }
                    }
                }
                SER = {
                white_peace = BUL
                transfer_state = 924
                leave_faction = yes
                }
                GRE = {
                white_peace = BUL
                transfer_state = 731
                leave_faction = yes
                }
                ROM = {
                white_peace = BUL
                transfer_state = 77
                leave_faction = yes
                }
                TUR = {
                white_peace = BUL
                transfer_state = 341
                leave_faction = yes
                }
                MNT = {
                white_peace = BUL
                leave_faction = yes
                }
                BUL = {
                    country_event = {
                    id = ww1_serbia.18
                    }
                }
            }
        }
    }
    on_war = {
        effect = {
            if = {
                limit = {
                    GER = {
                        AND = {
                        has_war_with = FRA
                        has_war_with = BEL
                        has_war_with = ENG
                        has_completed_focus = GER_schlieffen_moltke_plan_idea
                        }
                    }
                }
                GER = {
                    add_ideas = GER_schlieffen_moltke_plan_idea
                }
            }
        }
    }
    on_war = {
        effect = {
            if = {
                limit = {
                    GER = {
                        AND = {
                        has_war_with = FRA
                        has_war_with = BEL
                        has_war_with = ENG
                        has_completed_focus = GER_Helmuth_von_Moltke
                        }
                    }
                }
                GER = {
                    add_ideas = GER_Helmuth_Plan
                }
            }
        }
    }
}
