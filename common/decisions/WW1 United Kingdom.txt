@ENG_RIFLE_SHIPMENT_TRIGGER = 999
@ENG_RIFLE_SHIPMENT_EFFECT = 1000


@ENG_ARTY_SHIPMENT_TRIGGER = 99
@ENG_ARTY_SHIPMENT_EFFECT = 100


@ENG_SPEQ_SHIPMENT_TRIGGER = 99
@ENG_SPEQ_SHIPMENT_EFFECT = 100


# above are constant definitions for kit shipments 
# split per kit type so they can be changed separately

GER_ENG_agadir_crisis_category = {

	ENG_send_battle_ship = {
		priority = 100
		allowed = {
			original_tag = ENG
		}
		visible = {
			FRA = { 
			    controls_state = 461
				controls_state = 462
		    }
		}
		complete_effect = {
		    add_political_power = 1
			ENG = { news_event = { id = ww1_news.3 days = 10 } }
			add_named_threat = { threat = 5 name = ENG_send_battleship }
			ENG = {
				complete_national_focus = ENG_Interfere_In_Agadir
			}
		}
		fire_only_once = yes
		ai_will_do = {
			factor = 10000
		}
	}
}

ENG_Send_Equipment_category = {

	ENG_Send_rifles_to_Russia = {
		priority = 1
		icon = GFX_decision_hol_draw_up_staff_plans
		
		cost = 0
		days_re_enable = 14

		available = {
			ORO = { has_country_flag = WW1_started_spectator }  
			RUS = {
				has_capitulated = no
				controls_province = 3134 # Murmansk
				has_country_flag = RUS_Murmansk_founded
			}
			USA = {
				has_equipment = { infantry_equipment > @ENG_RIFLE_SHIPMENT_TRIGGER }
			}
		}

		complete_effect = {
			USA = {
				send_equipment = {
				equipment = infantry_equipment
				amount = @ENG_RIFLE_SHIPMENT_EFFECT
				target = RUS
				}
			}
		}
	}

	ENG_Send_arty_to_Russia = {
		priority = 1
		icon = GFX_decision_hol_draw_up_staff_plans

		cost = 0
		days_re_enable = 14
		
		available = {
			ORO = { has_country_flag = WW1_started_spectator }
			RUS = {
				has_capitulated = no
				controls_province = 3134 # Murmansk
				has_country_flag = RUS_Murmansk_founded
			}
			USA = {
				has_equipment = { artillery_equipment > @ENG_ARTY_SHIPMENT_TRIGGER }
			}
		}

		complete_effect = {
			USA = {
				send_equipment = {
					equipment = artillery_equipment
					amount = @ENG_ARTY_SHIPMENT_EFFECT
					target = RUS
				}
			}
		}
	}

	ENG_Send_speq_to_Russia = {
		priority = 1
		icon = GFX_decision_hol_draw_up_staff_plans

		cost = 0
		days_re_enable = 14
		
		available = {
			ORO = { has_country_flag = WW1_started_spectator }
			RUS = {
				has_capitulated = no
				controls_province = 3134 # Murmansk
				has_country_flag = RUS_Murmansk_founded
			}
			USA = {
				has_equipment = { support_equipment > @ENG_SPEQ_SHIPMENT_TRIGGER }
			}
		}

		complete_effect = {
			USA = {
				send_equipment = {
					equipment = support_equipment
					amount = @ENG_SPEQ_SHIPMENT_EFFECT
					target = RUS
				}
			}
		}
	}
	
	ENG_Send_rifles_to_France = {
		priority = 1
		icon = GFX_decision_hol_draw_up_staff_plans
		
		cost = 0
		days_re_enable = 14

		available = {
			ORO = { has_country_flag = WW1_started_spectator }
			FRA = {
				has_capitulated = no
				OR = { # Check to see if France can reasonably take delivery - can add more ports
					controls_province = 575		# Dunkerque
					controls_province = 9434	# Le Havre
					controls_province = 6449	# Cherbourg
					controls_province = 3552	# Brest
					controls_province = 9737	# Bordeaux
				}
			}
			USA = {
				has_equipment = { infantry_equipment > @ENG_RIFLE_SHIPMENT_TRIGGER }
			}
		}

		complete_effect = {
			USA = {
				send_equipment = {
					equipment = infantry_equipment
					amount = @ENG_RIFLE_SHIPMENT_EFFECT
					target = FRA
				}
			}
		}
	}

	ENG_Send_arty_to_France = {
		priority = 1
		icon = GFX_decision_hol_draw_up_staff_plans

		cost = 0
		days_re_enable = 14
		
		available = {
			ORO = { has_country_flag = WW1_started_spectator }
			FRA = {
				has_capitulated = no
				OR = {
					controls_province = 575		# Dunkerque
					controls_province = 9434	# Le Havre
					controls_province = 6449	# Cherbourg
					controls_province = 3552	# Brest
					controls_province = 9737	# Bordeaux
				}
			}
			USA = {
				has_equipment = { artillery_equipment > @ENG_ARTY_SHIPMENT_TRIGGER }
			}
		}

		complete_effect = {
			USA = {
				send_equipment = {
					equipment = artillery_equipment
					amount = @ENG_ARTY_SHIPMENT_EFFECT
					target = FRA
				}
			}
		}
	}

	ENG_Send_speq_to_France = {
		priority = 1
		icon = GFX_decision_hol_draw_up_staff_plans

		cost = 0
		days_re_enable = 14
		
		available = {
			ORO = { has_country_flag = WW1_started_spectator }
			FRA = {
				has_capitulated = no
				OR = {
					controls_province = 575		# Dunkerque
					controls_province = 9434	# Le Havre
					controls_province = 6449	# Cherbourg
					controls_province = 3552	# Brest
					controls_province = 9737	# Bordeaux
				}
			}
			USA = {
				has_equipment = { support_equipment > @ENG_SPEQ_SHIPMENT_TRIGGER }
			}
		}

		complete_effect = {
			USA = {
				send_equipment = {
					equipment = support_equipment
					amount = @ENG_SPEQ_SHIPMENT_EFFECT
					target = FRA
				}
			}
		}
	}
	
	ENG_Send_rifles_to_Italy = {
		priority = 1
		icon = GFX_decision_hol_draw_up_staff_plans
		
		cost = 0
		days_re_enable = 14

		available = {
			ORO = { has_country_flag = WW1_started_spectator }
			ITA = {
				has_idea = ITA_entente # WW1 entry check
				has_capitulated = no
				OR = { # check if Italy can take delivery - can add more ports
					controls_province = 6788	# Genoa
					controls_province = 6973	# La Spezia
					controls_province = 819		# Naples
					controls_province = 10074	# Palermo
					controls_province = 11837	# Taranto
				}
			}
			USA = {
				has_equipment = { infantry_equipment > @ENG_RIFLE_SHIPMENT_TRIGGER }
			}
		}

		complete_effect = {
			USA = {
				send_equipment = {
					equipment = infantry_equipment
					amount = @ENG_RIFLE_SHIPMENT_EFFECT
					target = ITA
				}
			}
		}
	}

	ENG_Send_arty_to_Italy = {
		priority = 1
		icon = GFX_decision_hol_draw_up_staff_plans

		cost = 0
		days_re_enable = 14
		
		available = {
			ORO = { has_country_flag = WW1_started_spectator }
			ITA = {
				has_idea = ITA_entente
				has_capitulated = no
				OR = {
					controls_province = 6788	# Genoa
					controls_province = 6973	# La Spezia
					controls_province = 819		# Naples
					controls_province = 10074	# Palermo
					controls_province = 11837	# Taranto
				}
			}
			USA = {
				has_equipment = { artillery_equipment > @ENG_ARTY_SHIPMENT_TRIGGER }
			}
		}

		complete_effect = {
			USA = {
				send_equipment = {
					equipment = artillery_equipment
					amount = @ENG_ARTY_SHIPMENT_EFFECT
					target = ITA
				}
			}
		}
	}

	ENG_Send_speq_to_Italy = {
		priority = 1
		icon = GFX_decision_hol_draw_up_staff_plans

		cost = 0
		days_re_enable = 14
		
		available = {
			ORO = { has_country_flag = WW1_started_spectator }
			ITA = {
				has_idea = ITA_entente
				has_capitulated = no
				OR = {
					controls_province = 6788	# Genoa
					controls_province = 6973	# La Spezia
					controls_province = 819		# Naples
					controls_province = 10074	# Palermo
					controls_province = 11837	# Taranto
				}
			}
			USA = {
				has_equipment = { support_equipment > @ENG_SPEQ_SHIPMENT_TRIGGER }
			}
		}

		complete_effect = {
			USA = {
				send_equipment = {
					equipment = support_equipment
					amount = @ENG_SPEQ_SHIPMENT_EFFECT
					target = ITA
				}
			}
		}
	}
	
	ENG_invest_ast = {
		allowed = {
			original_tag = ENG
		}
		available = {
			OR = {
				has_completed_focus = ENG_finish_development
				custom_trigger_tooltip = {
					tooltip = ENG_develop_no_more_cores_tt
					AST = {
						all_core_state = {
							has_state_flag = ENG_development_marker 
						}
					}
				}
			}
		}

		activation = {
			has_completed_focus = ENG_develop_ast
			AST = {
				NOT = {
					all_core_state = {
						has_state_flag = ENG_development_marker 
					}
				}
			}
		}

		is_good = yes

		selectable_mission = no

		days_mission_timeout = 120

		modifier = {
		}

		ai_will_do = {
			factor = 1
		}
		timeout_effect = {
			AST = {
				random_core_state = {
					limit = {
						NOT = { has_state_flag = ENG_development_marker }
						is_fully_controlled_by = AST
						
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					
					set_state_flag = ENG_development_marker # Marks the selected state
					custom_effect_tooltip = ENG_ast_dev_tt5
				}
				
			}
			hidden_effect = {
				add_to_variable = { AST_investments = 1 }
				if = {
					limit = {
						check_variable = {
							var = AST_investments
							value = AST.num_core_states
							compare = greater_than_or_equals
						}
					}
					add_to_variable = { ENG_industrial_consumer_goods_expected_value = -0.03 tooltip = consumer_goods_expected_value_tt }
				}
				else = {
					activate_mission = ENG_invest_ast
				}
			}
		}
	}

	ENG_invest_nzl = {
		allowed = {
			original_tag = ENG
		}
		available = {
			OR = {
				has_completed_focus = ENG_finish_development
				custom_trigger_tooltip = {
					tooltip = ENG_develop_no_more_cores_tt
					NZL = {
						all_core_state = {
							has_state_flag = ENG_development_marker 
						}
					}
				}
			}
		}

		activation = {
			has_completed_focus = ENG_develop_nzl
			NZL = {
				NOT = {
					all_core_state = {
						has_state_flag = ENG_development_marker 
					}
				}
			}
		}

		is_good = yes

		selectable_mission = no

		days_mission_timeout = 120

		modifier = {
		}

		ai_will_do = {
			factor = 1
		}
		timeout_effect = {
			NZL = {
				random_core_state = {
					limit = {
						NOT = { has_state_flag = ENG_development_marker }
						is_fully_controlled_by = NZL
						
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					
					set_state_flag = ENG_development_marker # Marks the selected state
					custom_effect_tooltip = ENG_nzl_dev_tt5
				}
				
			}
			hidden_effect = {
				add_to_variable = { NZL_investments = 1 }
				if = {
					limit = {
						check_variable = {
							var = NZL_investments
							value = NZL.num_core_states
							compare = greater_than_or_equals
						}
					}
					add_to_variable = { ENG_industrial_consumer_goods_expected_value = -0.03 tooltip = consumer_goods_expected_value_tt }
				}
				else = {
					activate_mission = ENG_invest_nzl
				}
			}
		}
	}

	ENG_invest_can = {
		allowed = {
			original_tag = ENG
		}
		available = {
			OR = {
				has_completed_focus = ENG_finish_development
				custom_trigger_tooltip = {
					tooltip = ENG_develop_no_more_cores_tt
					CAN = {
						all_core_state = {
							has_state_flag = ENG_development_marker 
						}
					}
				}
			}
		}

		activation = {
			has_completed_focus = ENG_develop_canada
			CAN = {
				NOT = {
					all_core_state = {
						has_state_flag = ENG_development_marker 
					}
				}
			}
		}

		is_good = yes

		selectable_mission = no

		days_mission_timeout = 120

		modifier = {
		}

		ai_will_do = {
			factor = 1
		}
		timeout_effect = {
			CAN = {
				random_core_state = {
					limit = {
						NOT = { has_state_flag = ENG_development_marker }
						is_fully_controlled_by = CAN
						
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					set_state_flag = ENG_development_marker # Marks the selected state
					custom_effect_tooltip = ENG_can_dev_tt5
				}
				
			}
			hidden_effect = {
				add_to_variable = { CAN_investments = 1 }
				if = {
					limit = {
						check_variable = {
							var = CAN_investments
							value = CAN.num_core_states
							compare = greater_than_or_equals
						}
					}
					add_to_variable = { ENG_industrial_consumer_goods_expected_value = -0.03 tooltip = consumer_goods_expected_value_tt }
				}
				else = {
					activate_mission = ENG_invest_can
				}
			}
		}
	}

	ENG_invest_saf = {
		allowed = {
			original_tag = ENG
		}
		available = {
			OR = {
				has_completed_focus = ENG_finish_development
				custom_trigger_tooltip = {
					tooltip = ENG_develop_no_more_cores_tt
					SAF = {
						all_core_state = {
							has_state_flag = ENG_development_marker 
						}
					}
				}
			}
		}

		activation = {
			has_completed_focus = ENG_develop_saf
			SAF = {
				NOT = {
					all_core_state = {
						has_state_flag = ENG_development_marker 
					}
				}
			}
		}

		is_good = yes

		selectable_mission = no

		days_mission_timeout = 120

		modifier = {
		}

		ai_will_do = {
			factor = 1
		}
		timeout_effect = {
			SAF = {
				random_core_state = {
					limit = {
						NOT = { has_state_flag = ENG_development_marker }
						is_fully_controlled_by = SAF
						
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					set_state_flag = ENG_development_marker # Marks the selected state
					custom_effect_tooltip = ENG_saf_dev_tt5
				}
				
			}
			hidden_effect = {
				add_to_variable = { SAF_investments = 1 }
				if = {
					limit = {
						check_variable = {
							var = SAF_investments
							value = SAF.num_core_states
							compare = greater_than_or_equals
						}
					}
					add_to_variable = { ENG_industrial_consumer_goods_expected_value = -0.03 tooltip = consumer_goods_expected_value_tt }
				}
				else = {
					activate_mission = ENG_invest_saf
				}
			}
		}
	}

	ENG_invest_raj = {
		allowed = {
			original_tag = ENG
		}
		available = {
			OR = {
				has_completed_focus = ENG_finish_development
				custom_trigger_tooltip = {
					tooltip = ENG_develop_no_more_cores_tt
					RAJ = {
						all_core_state = {
							has_state_flag = ENG_development_marker 
						}
					}
				}
			}
		}

		activation = {
			has_completed_focus = ENG_develop_raj
			RAJ = {
				NOT = {
					all_core_state = {
						has_state_flag = ENG_development_marker 
					}
				}
			}
		}

		is_good = yes

		selectable_mission = no

		days_mission_timeout = 120

		modifier = {
		}

		ai_will_do = {
			factor = 1
		}
		timeout_effect = {
			RAJ = {
				random_core_state = {
					limit = {
						NOT = { has_state_flag = ENG_development_marker }
						is_fully_controlled_by = RAJ
						
						free_building_slots = {
							building = arms_factory
							size > 0
							include_locked = yes
						}
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
					}
					
					set_state_flag = ENG_development_marker # Marks the selected state
					custom_effect_tooltip = ENG_raj_dev_tt5
				}
			}
			hidden_effect = {
				add_to_variable = { RAJ_investments = 1 }
				if = {
					limit = {
						check_variable = {
							var = RAJ_investments
							value = RAJ.num_core_states
							compare = greater_than_or_equals
						}
					}
					add_to_variable = { ENG_industrial_consumer_goods_expected_value = -0.03 tooltip = consumer_goods_expected_value_tt }
				}
				else = {
					activate_mission = ENG_invest_raj
				}
			}
		}
	}
}
